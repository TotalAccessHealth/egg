<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oscilloscope</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        .egg{
            background-size: contain;
            background-repeat: no-repeat;
            width: 110px;
            height: 110px;
            background-position: center;
            animation: rotate 15s linear infinite;
            box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.1);
            border-radius: 50%;
        }
        .egg canvas{
            width: 100%;
            height: 100%;
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            50% {
                transform: rotate(180deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
<div class="egg" style="background-image: url(circle.svg)">
    <canvas id="oscilloscope"></canvas>
</div>
<script>
    //create a canvas inside .egg element
    //if .

    const canvas = document.getElementById('oscilloscope');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function drawPulsatingAmoeba() {
        const t = Date.now();
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw three amoebas with different parameters and colors
        drawSingleAmoeba(t, centerX, centerY, 100, '#FFD556', 2, 0.8, 3);
        drawSingleAmoeba(t, centerX, centerY, 90, '#00B67A', 1, 1.2, 6);
        drawSingleAmoeba(t, centerX, centerY, 95, 'white', 2.3, 1.4, 2);
    }

    function drawSingleAmoeba(t, centerX, centerY, baseRadius, color, frequencyModifier, amplitudeModifier, speedModifier) {
        ctx.beginPath();

        let startRadius = null; // Variable to store the radius of the starting point
        const adjustedTime = t * speedModifier;

        for (let angle = 0; angle <= 2 * Math.PI; angle += 0.05) {
            const waveAmplitude = (20 + 10 * Math.sin(adjustedTime / 1000)) * amplitudeModifier; // Dynamic amplitude for pulsating effect
            const frequency = (2 + 0.5 * Math.sin(adjustedTime / 2000)) * frequencyModifier; // Dynamic frequency for changing form

            let radius = baseRadius + waveAmplitude * Math.sin(frequency * angle + t / 500) +
                10 * Math.cos(3 * angle + adjustedTime / 1500);

            if (angle === 0) {
                startRadius = radius; // Store the initial radius
            }

            // Blend the radius towards the end to smooth the transition
            if (angle > 2 * Math.PI - 0.2) { // Start blending in the last segment
                radius = radius + (startRadius - radius) * ((angle - (2 * Math.PI - 0.2)) / 0.2);
            }

            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);

            if (angle === 0) {
                ctx.moveTo(x, y); // Move to the starting point without drawing a line
            } else {
                ctx.lineTo(x, y);
            }
        }

        ctx.closePath(); // Connects the end of the path back to the start smoothly

        ctx.strokeStyle = color;
        ctx.lineWidth = 3;
        ctx.stroke();
    }

    // Continuously draw the amoeba, updating its shape to create a pulsating effect
    setInterval(drawPulsatingAmoeba, 16); // Update every 16 milliseconds (~60 fps)
</script>
</body>
</html>
